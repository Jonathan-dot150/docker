1. Un structure de la base et plan de travail

- Discussion avec l'IA au sujet de la marche à suivre et des idées pouvant être découvertes

https://chatgpt.com/share/692cf0c4-51a8-800b-9242-e5c2db485e3a

Le fichier exploration de technologies avantages et inconvénients d'autres aspects de notre recherche.

- Installation des différents outils et usage de Gordon ai

Gordon AIA été utilisé une seule fois afin d'obtenir une Aide concernant l'installation propre de docker au début de la création.

Un problème de connexion c'est retrouver importante dans notre système Il a fallu alors choisir d'installer une autre VM afin de remplacer la première ou docker n'avait pas pu être installé convenablement Il avait été choisi de mettre d'abord docker desktop mais au vu de l'installation docker swarm et pour éviter un problème de mélange ou de conflit Nous avons préféré aller sur docker natif afin de pouvoir y installer docker swarm plus tard et pouvoir utiliser portainer à la place afin de pouvoir gérer les différentes images et les containers.

- générations de codes à partir de chat GPT
    - Suggestions de modifications

Pour les services dans le point .yaml, déclaration: 
- du réseau
- de l'image
- Des volumes utilisés pour installer haut Ollama
- Des ports Utilisé par le service afin d'écouter toute forme d'appel
- Appel de la méthode swarm pour la réplication ainsi que la politique d'usage sans oublier les dépendances avec le manager À savoir la VM numéro un qui est le leader.
- Compréhension des différents concepts

```yaml

  ollama:
    image: ollama/ollama:latest
    ports:
      - "11434:11434"
    volumes:
      - ollama-data:/root/.ollama
    networks:
      - lab_net
    deploy:
      replicas: 1
      restart_policy:
        condition: on-failure
      placement:
        constraints:
          - node.role == manager
      resources:
        limits:
          cpus: '2'
          memory: 4G

```

Ce cas se présente pour tous les autres services dans l'arborescence. La configuration de Nginx ainsi que celle de la librairie Python3.19.

```yaml


  others:
    image: 10.0.0.51:5000/myuser/fastapi-others:latest
    ports:
      - "5001:5000"   # port mapping utile pour debug; en prod laisser portainer
    environment:
      DATABASE_URL: "sqlite:///./data/chat.db"
      OLLAMA_URL: "http://ollama:11434"
    volumes:
      - others-data:/app/data
    networks:
      - lab_net
    deploy:
      replicas: 2
      restart_policy:
        condition: on-failure
      update_config:
        parallelism: 1
        delay: 5s
      placement:
        constraints:
          - node.role == worker


    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:5000/health || exit 1"]
      interval: 30s
      timeout: 5s
      retries: 3
    secrets:
      - db_password
  web_experience:
    image: myuser/nginx-web:latest
    ports:
      - "8082:80"
    networks:
      - lab_net
    configs:
      - source: nginx_config
        target: /etc/nginx/conf.d/default.conf
    volumes:
      - web_html:/usr/share/nginx/html:ro
    deploy:
      replicas: 3
      restart_policy:
        condition: on-failure
      update_config:
        parallelism: 1
        delay: 10s
      placement:
        constraints:
          - node.role == worker

```

- Dans le cas qui nous concerne nous avons dû faire appel directement à d'autres paramètres en plus des services qui sont configurés. Des configurations supplémentaires telles que config pour ngenx afin de définir un nouveau fichier par défaut sur lequel la base angings devra s'ajuster.

* Appel du réseau Ladenet qui servira pour toute la brissance et l'interconnexion.
* Déclaration des volumes nécessaires à l'implémentation Et précision de l'emplacement de la localisation de la page web.
* Rajout d'un mot de passe secrite afin de pouvoir connecter également de manière sécurisée.

```yaml

    configs:
    nginx_config:
        file: ../nginx/default.conf

    networks:
    lab_net:
        external: true

    volumes:
    ollama-data:
    others-data:
    web_html:
        driver: local

    secrets:
    db_password:
        external: true

```

- appel d'un outil de gestion tel que portainer afin de pouvoir gérer les différentes bases

```bash

docker volume create portainer_data

docker run -d \
  -p 8000:8000 \
  -p 9443:9443 \
  --name portainer \
  --restart=always \
  -v /var/run/docker.sock:/var/run/docker.sock \
  -v portainer_data:/data \
  portainer/portainer-ce:latest

```

2. Appel de la page HTTP

- Déployement de la page HTTP afin d'y intégrer un code de chat entre l'intelligence artificielle et l'utilisateur
- Génération d'une page tierce ressemblant à un chat top de prompt
- Modification de cette page afin qu'elle puisse être intégrée à la page une mais également rester tel quel
- Test d'appel de la fonction ollama à partir de la page section prévue

3. Appel de docteur Swarm

- Rechercher préparatoire sur la documentation docker swarm et compréhension de son concept (vidéos Youtube)
- Compréhension du concept en discutant avec chat GPT
- génération d'un .dockerfile et et D'un docker-compose.yaml afin de pouvoir construire automatiquement notre service
- mise en place de réseaux nécessaires pour l'interconnexion
- Installation de VM Ubuntu afin de réaliser la réplication
- Appels et installations de docker sur chacune des VM
- Appel de Dr Swarm afin de pouvoir déployer le manager sur tous les autres workers
- obtention de mots de passe
- Résolution des chemins d'accès

- Résolution de problème:
    - résolution du problème de réseau
    - résolution de redémarrage impromptue Du service nginx
    - Créations et installations complètes des outils nécessaires sur de nouvelles VM Ubuntu Afin de repartir docker swarm de manière équitable Et résolution des clés d'accès
    - Résolution du problème HTTP Nginx qui ne fait que redémarrer